<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doktor Takvimi</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome (For Icons) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <!-- jQuery (for date picker) -->
    <link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

    <style>
        .tab-content {
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 5px;
            border: 1px solid #ddd;
            margin-top: 20px;
        }

        .form-label {
            font-weight: bold;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .calendar-btn {
            margin-top: 20px;
        }
    </style>
</head>
<body>
<div class="container">
    <h2 class="my-4">Doktor Takvimi Yönetimi</h2>

    <!-- Tablar -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <a class="nav-link active" id="create-tab" data-bs-toggle="tab" href="#create-appointment" role="tab" aria-controls="create-appointment" aria-selected="true">Randevu Takvimi</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="appointments-tab" data-bs-toggle="tab" href="#appointments" role="tab" aria-controls="appointments" aria-selected="false">Alınmış Randevularım</a>
        </li>
    </ul>

    <div class="tab-content mt-4" id="myTabContent">

        <!-- Randevu Takvimi Sekmesi -->
        <div class="tab-pane fade show active" id="create-appointment" role="tabpanel" aria-labelledby="create-tab">
            <form id="appointment-form">
                <!-- Tarih Seçimi -->
                <div class="mb-3">
                    <label for="date" class="form-label">Randevu Tarihi</label>
                    <input type="text" id="date" class="form-control" placeholder="Tarih Seçin" required>
                </div>

                <!-- Başlangıç ve Bitiş Saatleri Seçimi -->
                <div class="mb-3">
                    <label for="start-time" class="form-label">Başlangıç Saati</label>
                    <input type="time" id="start-time" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label for="end-time" class="form-label">Bitiş Saati</label>
                    <input type="time" id="end-time" class="form-control" required>
                </div>

                <!-- Gönder Butonu -->
                <button type="submit" class="btn btn-primary calendar-btn">Takvim Oluştur</button>
            </form>
        </div>

        <!-- Alınmış Randevular Sekmesi -->
        <div class="tab-pane fade" id="appointments" role="tabpanel" aria-labelledby="appointments-tab">
            <h4>Alınmış Randevular</h4>
            <ul id="appointments-list" class="list-group">
                <!-- Randevular burada listelenecek -->
            </ul>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<script>
    $(document).ready(function() {
        // Datepicker için jQuery UI
        $("#date").datepicker({
            dateFormat: "yy-mm-dd", // Tarih formatı
            minDate: 0, // Gelecek tarihler seçilebilir
        });

        // Randevu Takvimi oluşturma işlemi
        $('#appointment-form').on('submit', function(event) {
            event.preventDefault();

            // Formdan alınan veriler
            const date = $('#date').val();
            const startTime = $('#start-time').val();
            const endTime = $('#end-time').val();

            if (date && startTime && endTime) {
                const appointment = {
                    date: date,
                    startTime: startTime,
                    endTime: endTime,
                };

                // Burada takvim verisini backend'e gönderebilirsiniz
                console.log('Takvim verisi gönderiliyor:', appointment);
                alert('Randevu takvimi başarıyla oluşturuldu!');

                // Formu sıfırla
                $('#appointment-form')[0].reset();
            } else {
                alert('Lütfen tüm alanları doldurun.');
            }
        });

        // Alınmış randevuları listeleme (Simülasyon)
        const appointments = [
            { date: "2024-12-10", startTime: "10:00", endTime: "10:30", patient: "Ali Veli" },
            { date: "2024-12-10", startTime: "11:00", endTime: "11:30", patient: "Ayşe Kara" },
            { date: "2024-12-11", startTime: "14:00", endTime: "14:30", patient: "Ahmet Demir" }
        ];

        function renderAppointments() {
            const list = $('#appointments-list');
            list.empty(); // Listeyi temizle
            appointments.forEach(function(appointment) {
                list.append(`
                        <li class="list-group-item">
                            ${appointment.date} - ${appointment.startTime} to ${appointment.endTime}
                            | Hastası: ${appointment.patient}
                        </li>
                    `);
            });
        }

        renderAppointments(); // Sayfa yüklendiğinde randevuları listele
    });
</script>
</body>
</html>
